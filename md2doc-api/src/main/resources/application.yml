system:
  name: md2doc
  whitelist:
    - /system/login
    - /system/register
    - /system/oss/download/**
    - /system/white/routes

server:
  port: ${server.port}
spring:
  profiles:
    active: dev
  application:
    name: md2doc
  servlet:
    multipart:
      max-file-size: 100MB
      max-request-size: 100MB
  datasource:
    url: jdbc:mysql://${md2doc.mysql.ip}:${md2doc.mysql.port}/${md2doc.mysql.db}?useUnicode=true&characterEncoding=UTF-8&serverTimezone=Asia/Shanghai
    username: ${md2doc.mysql.username}
    password: ${md2doc.mysql.password}
    driver-class-name: com.mysql.cj.jdbc.Driver
    druid:
      initialSize: 5
      minIdle: 5
      maxActive: 20
      maxWait: 600000
      # 主要配置以上几个即可
      timeBetweenEvictionRunsMillis: 600000
      minEvictableIdleTimeMillis: 300000
      validationQuery: SELECT 1 FROM DUAL
      testWhileIdle: true
      testOnBorrow: false
      testOnReturn: false
      poolPreparedStatements: true
      #配置监控统计拦截的filters：stat:监控统计、self4j(使用log4j的记得导入log4j的依赖）：日志记录、wall：防御sql注入 此处配置不能遗漏服务sql监控台不能监控sql
      filter:
        slf4j:
          enabled: true
        stat:
          enabled: true
          merge-sql: true
          slow-sql-millis: 5000
        wall:
          enabled: true
      #配置stat-view-servlet
      stat-view-servlet:
        enabled: true
        login-username: admin
        login-password: admin
        reset-enable: false
      #配置web-stat-filter
      web-stat-filter:
        enabled: true
  redis:
    # Redis服务器地址
    host: ${md2doc.redis.host}
    # Redis服务器端口号
    port: ${md2doc.redis.port}
    # 使用的数据库索引，默认是0
    database: ${md2doc.redis.index}
    # 连接超时时间
    timeout: 1800000
    # 设置密码
    #password: ${md2doc.redis.password}
  mvc:
    pathmatch:
      # 解决swagger报错
      matching-strategy: ANT_PATH_MATCHER
  mail:
    default-encoding: UTF-8
    host: ${md2doc.mail.host}
    port: ${md2doc.mail.port}
    username: ${md2doc.mail.username}
    password: ${md2doc.mail.password}
    properties:
      mail:
        smtp:
          auth: true
          starttls:
            enable: true
            required: true
          ssl:
            trust: ${md2doc.mail.host}
  jackson:
    date-format: yyyy-MM-dd HH:mm:ss
    time-zone: GMT+8
  rabbitmq:
    host: ${md2doc.rabbitmq.host}
    port: ${md2doc.rabbitmq.port}
    username: ${md2doc.rabbitmq.username}
    password: ${md2doc.rabbitmq.password}
    listener:
      simple:
        concurrency: ${md2doc.rabbitmq.concurrency} # 消费者数量
        max-concurrency: ${md2doc.rabbitmq.maxConcurrency} # 最大消费者数量
        prefetch: ${md2doc.rabbitmq.prefetch} # 消费者每次从队列获取的消息数量。写多了，如果长时间得不到消费，数据就一直得不到处理
        acknowledge-mode: ${md2doc.rabbitmq.ackMode} # 消费接收确认机制-手动确认
        retry:
          enabled: ${md2doc.rabbitmq.retry.enable}
          initial-interval: ${md2doc.rabbitmq.retry.time} # 初始失败的时长等待
          multiplier: ${md2doc.rabbitmq.retry.multiplier} # 失败后下次等待时常的倍数
          max-attempts: ${md2doc.rabbitmq.retry.maxAttempts} # 最大重连次数
          stateless: ${md2doc.rabbitmq.retry.stateless} # true无状态，false有状态。如果业务包含事务，改为false

mybatis-plus:
  mapperLocations: classpath*:mapper/**/*Mapper.xml
  typeAliasesPackage: com.abc.**.domain.entity
  configuration:
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl
    map-underscore-to-camel-case: true

wechat:
  appid: wxed9954c01bb89b47
  appSecret: a7482517235173ddb4083788de60b90e
  redirectUri: http://localhost:8160/auth/wxLogin

oss:
  type: ${md2doc.oss.type}
  minio:
    endpoint: ${md2doc.oss.minio.endpoint}
    bucketName: ${md2doc.oss.minio.bucketName}
    accessKey: ${md2doc.oss.minio.accessKey}
    secretKey: ${md2doc.oss.minio.secretKey}
  aliyun:
    end-point: ${md2doc.oss.aliyun.endpoint}
    access-key-id: ${md2doc.oss.aliyun.accessKey}
    access-key-secret: ${md2doc.oss.aliyun.secretKey}
    bucket-name: ${md2doc.oss.aliyun.bucketName}
  local:
    path: ${md2doc.oss.local.path}

url:
  front: ${md2doc.url.front}
  backend: ${md2doc.url.backend}

# token配置
token:
  # 令牌自定义标识
  header: Authorization
  # 令牌密钥
  secret: abcdefghijklmnopqrstuvwxyz
  # 令牌有效期（默认60分钟）
  expireTime: 60
  # 令牌刷新时间（默认10分钟）
  refreshTime: 10